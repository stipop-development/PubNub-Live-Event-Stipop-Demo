{"ast":null,"code":"import _slicedToArray from \"/Users/stipop/Desktop/StipopRepos/pubnub_stream/chat-component-app-live-event/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/stipop/Desktop/StipopRepos/pubnub_stream/chat-component-app-live-event/src/components/MessageList/MessageList.tsx\";\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { MessageListWrapper } from './MessageList.styles';\nimport { Message } from '../Message/Message';\nimport { useAppState } from '../../AppStateContext';\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position';\nexport var MessageList = function MessageList(props) {\n  var _useAppState = useAppState(),\n      state = _useAppState.state;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      stopOnScroll = _useState2[0],\n      setStopOnScroll = _useState2[1];\n\n  var messagesEndRef = useRef(null); //This is our reference to the instance of this component in the DOM\n  //const listBottomPos = messagesEndRef.current.getBoundingClientRect().bottom;\n  //console.log(`listBottomPos: ${listBottomPos}`);\n\n  var scrollToBottom = function scrollToBottom() {\n    var _messagesEndRef$curre;\n\n    messagesEndRef === null || messagesEndRef === void 0 ? void 0 : (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      block: \"end\",\n      inline: \"nearest\",\n      behavior: \"smooth\"\n    });\n  };\n\n  useScrollPosition(function (_ref) {\n    var prevPos = _ref.prevPos,\n        currPos = _ref.currPos; //const bottom = messagesEndRef.current.scrollHeight - currPos.y;//=== e.target.clientHeight;\n\n    var isShow = currPos.y > prevPos.y;\n    console.log(\"\".concat(isShow));\n    if (isShow !== stopOnScroll) setStopOnScroll(isShow);\n  }, []);\n  useEffect(scrollToBottom, [state.messages]);\n  var Messages = Array.from(state.messages).map(function (onemessage) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      ref: messagesEndRef,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Message, {\n      message: onemessage,\n      key: onemessage.key,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }\n    }));\n  });\n  return /*#__PURE__*/React.createElement(MessageListWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, Messages);\n};\nMessageList.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"MessageList\"\n};\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src/components/MessageList/MessageList.tsx\"] = {\n    name: \"MessageList\",\n    docgenInfo: MessageList.__docgenInfo,\n    path: \"src/components/MessageList/MessageList.tsx\"\n  };\n}","map":{"version":3,"sources":["/Users/stipop/Desktop/StipopRepos/pubnub_stream/chat-component-app-live-event/src/components/MessageList/MessageList.tsx"],"names":["MessageList","state","useAppState","stopOnScroll","setStopOnScroll","useState","messagesEndRef","useRef","scrollToBottom","block","inline","behavior","useScrollPosition","prevPos","currPos","isShow","console","useEffect","Messages","onemessage"],"mappings":"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","sourcesContent":["import React, { useCallback,FunctionComponent, useReducer, useEffect, useState, useContext, useRef } from 'react';\nimport { MessageListWrapper } from './MessageList.styles';\nimport { Message } from '../Message/Message';\nimport { UserMessage, appStateReducer, appData,useAppState } from '../../AppStateContext';\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position';\n\ninterface MessageListProps {\n  messages?: UserMessage[],\n}\n\nexport const MessageList: React.SFC<MessageListProps> = (props: MessageListProps) => {\n  \n  const { state } = useAppState();\n  const [stopOnScroll, setStopOnScroll] = useState(false);\n  const messagesEndRef = useRef<null | HTMLDivElement>(null) //This is our reference to the instance of this component in the DOM\n  //const listBottomPos = messagesEndRef.current.getBoundingClientRect().bottom;\n  //console.log(`listBottomPos: ${listBottomPos}`);\n  const scrollToBottom = () => {\n   messagesEndRef?.current?.scrollIntoView({ block: \"end\", inline: \"nearest\", behavior: \"smooth\" });\n    }\n\n  useScrollPosition(({ prevPos, currPos }) => {\n    //const bottom = messagesEndRef.current.scrollHeight - currPos.y;//=== e.target.clientHeight;\n    const isShow = currPos.y > prevPos.y\n    console.log(`${isShow}`);\n    if (isShow !== stopOnScroll) setStopOnScroll(isShow)\n  }, [])\n\n    useEffect(scrollToBottom, [state.messages]);\n\n  \n\n  const Messages = Array.from(state.messages).map((onemessage: UserMessage) => {\n    return (\n      <>\n        <div ref={messagesEndRef} />\n        <Message message={onemessage} key={onemessage.key} />\n      </>\n    );\n  }\n  );\n\n  return (\n    <MessageListWrapper>\n      {Messages}\n    </MessageListWrapper>\n\n  );\n\n}\n\n"]},"metadata":{},"sourceType":"module"}